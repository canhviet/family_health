<div mat-dialog-content>
    <h2>Create New Record</h2>
    <form enctype="multipart/form-data">
        <div class="form-field">
            <mat-form-field appearance="fill">
                <mat-label>condition</mat-label>
                <input
                    matInput
                    type="text"
                    [(ngModel)]="record.condition"
                    name="condition"
                />
            </mat-form-field>
        </div>
        <div class="form-field">
            <mat-form-field appearance="fill">
                <mat-label>notes</mat-label>
                <input
                    matInput
                    type="text"
                    [(ngModel)]="record.notes"
                    name="notes"
                />
            </mat-form-field>
        </div>
        <div class="form-field">
            <mat-form-field appearance="fill">
                <mat-label>treating</mat-label>
                <input
                    matInput
                    type="text"
                    [(ngModel)]="record.treatingDoctor"
                    name="treating"
                />
            </mat-form-field>
        </div>
        <div class="form-field">
            <mat-form-field appearance="fill">
                <mat-label>Revisit Date</mat-label>
                <input
                    matInput
                    [matDatepicker]="picker"
                    [(ngModel)]="record.revisitDate"
                    name="revisitDate"
                />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>

        <hr class="hr" />

        <p>Prescription</p>

        <div
            class="form-row"
            *ngFor="let p of prescription.medications; let i = index"
        >
            <p>{{ i + 1 }}</p>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Name</mat-label>
                    <input
                        matInput
                        type="text"
                        [(ngModel)]="p.medicationName"
                        name="medicationName{{ i }}"
                    />
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Dosage</mat-label>
                    <input
                        matInput
                        type="text"
                        [(ngModel)]="p.dosage"
                        name="dosage{{ i }}"
                    />
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Frequency</mat-label>
                    <input
                        matInput
                        type="text"
                        [(ngModel)]="p.frequency"
                        name="frequency{{ i }}"
                    />
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Instructions</mat-label>
                    <input
                        matInput
                        type="text"
                        [(ngModel)]="p.instructions"
                        name="instructions{{ i }}"
                    />
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Quantity</mat-label>
                    <input
                        matInput
                        type="text"
                        [(ngModel)]="p.quantity"
                        name="quantity{{ i }}"
                    />
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>Start Date</mat-label>
                    <input
                        matInput
                        [matDatepicker]="startPicker"
                        [(ngModel)]="p.startDate"
                        name="startDate{{ i }}"
                    />
                    <mat-datepicker-toggle
                        matSuffix
                        [for]="startPicker"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #startPicker></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="form-field">
                <mat-form-field appearance="fill">
                    <mat-label>End Date</mat-label>
                    <input
                        matInput
                        [matDatepicker]="endPicker"
                        [(ngModel)]="p.endDate"
                        name="endDate{{ i }}"
                    />
                    <mat-datepicker-toggle
                        matSuffix
                        [for]="endPicker"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #endPicker></mat-datepicker>
                </mat-form-field>
            </div>
        </div>

        <div class="button-container">
            <button class="circle-button" (click)="addMedication()">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>
    </form>

    <hr class="hr" />
</div>

<div mat-dialog-actions>
    <button (click)="onSubmit()" class="btn btn-outline-primary m-3">
        Save
    </button>
    <button (click)="onUpload()" class="btn btn-outline-secondary m-3">
        Upload
    </button>
    <button (click)="onClose()" class="btn btn-outline-danger m-3">
        Close
    </button>
</div>
